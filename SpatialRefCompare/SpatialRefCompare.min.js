(function(){"use strict";var e=document,m=e.getElementsByTagName("a"),f=[],l={},c;function b(i){var d="",n=window.location;if(i.indexOf(n.protocol)===0){return i}d+=n.protocol+"//";if(i.indexOf(n.hostname)===0){return d+i}d+=n.hostname;if(i.indexOf(n.pathname)===0){return d+i}return d+n.pathname+i}function j(d){if(l[d]){return l[d]}l[d]="#"+(16777216+(Math.random())*16777215).toString(16).substr(1,6);return l[d]}function a(p){var o=l[p],i="",n=[o.substr(1,1),o.substr(3,1),o.substr(5,1)].sort()[1],d="fedcba98".indexOf(n)>-1?"0000000001234567":"89abcdefffffffff",q;for(q=0;q<o.length;q++){i+=q%2===1?d[parseInt(o.substr(q,1),16)]:o.substr(q,1)}return i}function k(i){var o="&nbsp;No valid spatial reference available &nbsp;",d="span",p;if(i){o=i.latestWkid||i.wkid||i.latestWkt||i.wkt||o;if(i.latestWkid||i.wkid){d="a"}}p=e.createElement(d);if(d==="a"){p.setAttribute("href","http://spatialreference.org/ref/?search="+o)}p.setAttribute("style",["color:",j(o),";background:",a(o),";"].join(""));p.innerHTML=o;return p}function g(i,p,n,d){try{d=new (window.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");d.open(n?"POST":"GET",i,1);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.onreadystatechange=function(){d.readyState>3&&p&&p(d.responseText,d)};d.send(n)}catch(o){window.console&&console.log(o)}}function h(i){if(!i.length){return}var d=i.shift();g(d.url+"?f=json",function(n){n=JSON.parse(n);var p=k(n.spatialReference),o=e.createElement("b");o.innerHTML="&nbsp;"+n.singleFusedMapCache?"tiled ":"dynamic ";d.link.parentNode.appendChild(p);d.link.parentNode.appendChild(o);if(i.length){h(i)}})}for(c=0;c<m.length;c++){if(/(map|feature|image|mobile)server\/?$/i.test(m[c].href)){f.push({link:m[c],url:b(m[c].href)})}}if(f&&f.length){h(f)}else{alert("Pick a REST Service folder with services")}}());
