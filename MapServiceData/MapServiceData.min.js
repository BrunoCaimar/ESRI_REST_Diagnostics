(function(){var d=document,tags=d.getElementsByTagName("a"),urls=[],i;function ajax(u,callback,data,x){try{x=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");x.open(data?"POST":"GET",u,1);x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Content-type","application/x-www-form-urlencoded");x.onreadystatechange=function(){x.readyState>3&&callback&&callback(x.responseText,x);};x.send(data);}catch(e){window.console&&console.log(e);}}function add(nd,t,ct,hF,hC){if(hF&&!ct){return;}var li=d.createElement("li");li.innerHTML=["<b>",t,"</b>",(hC?"":": "+(ct instanceof Object?JSON.stringify(ct):ct))].join("");nd.appendChild(li);}function aSL(nd,t,ct){var li=d.createElement("li"),ul=d.createElement("ul"),i;li.innerHTML="<b>"+t+":</b>";for(i in ct){add(ul,i,ct[i],1);}li.appendChild(ul);nd.appendChild(li);}function queryMe(f){if(!f.length){return;}var data=f.shift();ajax(data.url+"?f=json",function(r){var dF=d.createDocumentFragment(),ul=d.createElement("ul");r=JSON.parse(r);add(dF,"Description",r.description,true);add(dF,"Service Description",r.serviceDescription,true);add(dF,"&copy;",r.copyrightText,true);add(dF,"Supports Dynamic Layers",0,r.supportsDynamicLayers,1);add(dF,"# Layers",r.layers?r.layers.length:0);add(dF,"# Tables",r.tables?r.tables.length:0,1);add(dF,"Tiled or Dynamic",r.tileInfo?" tiled":" dynamic");add(dF,"Spatial Reference",JSON.stringify(r.spatialReference||"none"));add(dF,"Min Scale",r.minScale||"None");add(dF,"Max Scale",r.maxScale||"None");aSL(dF,"Initial Extent",r.initialExtent);aSL(dF,"Full Extent",r.fullExtent);add(dF,"Units",r.units.replace("esri",""));aSL(dF,"Document Info",r.documentInfo);add(dF,"Max Record Count",r.maxRecordCount);tags[data.i].parentNode.appendChild(ul);ul.appendChild(dF);if(f.length){queryMe(f);}});}for(i=0;i<tags.length;i++){if(/(map|feature|image|mobile)server\/?$/i.test(tags[i].href)){urls.push({i:i,url:tags[i].href});}if(urls&&urls.length){queryMe(urls);}}}());